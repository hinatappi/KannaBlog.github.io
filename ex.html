
<!DOCTYPE html>






<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <meta name="theme-color" content="#222">












    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />






















    <link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

    <link href="/css/main.css?v=6.0.4" rel="stylesheet" type="text/css" />


    <link rel="apple-touch-icon" sizes="180x180" href="/img/blog/head.png?v=6.0.4">


    <link rel="icon" type="image/png" sizes="32x32" href="/img/blog/head.png?v=6.0.4">


    <link rel="icon" type="image/png" sizes="16x16" href="/img/blog/head.png?v=6.0.4">


    <link rel="mask-icon" href="/img/blog/head.png?v=6.0.4" color="#222">









    <script type="text/javascript" id="hexo.configurations">
        var NexT = window.NexT || {};
        var CONFIG = {
            root: '/',
            scheme: 'Gemini',
            version: '6.0.4',
            sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
            fancybox: false,
            fastclick: false,
            lazyload: false,
            tabs: true,
            motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
            algolia: {
                applicationID: 'MER6FWLCC3',
                apiKey: '61fb8693b51139198d8a53cf8a0081bb',
                indexName: 'Bboysoul',
                hits: {"per_page":10},
                labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
            }
        };
    </script>








    <meta name="keywords" content="Bboysoul" />


    <meta name="description" content="Bboysoul&apos;s Blog">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Bboysoul">
    <meta property="og:url" content="https://www.bboysoul.com/index.html">
    <meta property="og:site_name" content="Bboysoul">
    <meta property="og:description" content="Bboysoul&apos;s Blog">
    <meta property="og:locale" content="zh-CN">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Bboysoul">
    <meta name="twitter:description" content="Bboysoul&apos;s Blog">






    <link rel="canonical" href="https://www.bboysoul.com/"/>



    <script type="text/javascript" id="page.configurations">
        CONFIG.page = {
            sidebar: "",
        };
    </script>
    <title>Bboysoul</title>







    <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?b136a2f68954a4a35e9bcd8b36a590da";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>




    <noscript>
        <style type="text/css">
            .use-motion .motion-element,
            .use-motion .brand,
            .use-motion .menu-item,
            .sidebar-inner,
            .use-motion .post-block,
            .use-motion .pagination,
            .use-motion .comments,
            .use-motion .post-header,
            .use-motion .post-body,
            .use-motion .collection-title { opacity: initial; }

            .use-motion .logo,
            .use-motion .site-title,
            .use-motion .site-subtitle {
                opacity: initial;
                top: initial;
            }

            .use-motion {
            .logo-line-before i { left: initial; }
            .logo-line-after i { right: initial; }
            }
        </style>
    </noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">






<div class="container sidebar-position-left
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"> <div class="site-brand-wrapper">
            <div class="site-meta ">


                <div class="custom-logo-site-title">
                    <a href="/"  class="brand" rel="start">
                        <span class="logo-line-before"><i></i></span>
                        <span class="site-title">Bboysoul</span>
                        <span class="logo-line-after"><i></i></span>
                    </a>
                </div>

                <p class="site-subtitle"></p>

            </div>

            <div class="site-nav-toggle">
                <button>
                    <span class="btn-bar"></span>
                    <span class="btn-bar"></span>
                    <span class="btn-bar"></span>
                </button>
            </div>
        </div>

            <nav class="site-nav">



                <ul id="menu" class="menu">


                    <li class="menu-item menu-item-home">
                        <a href="/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
                    </li>


                    <li class="menu-item menu-item-tags">
                        <a href="/tags/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签<span class="badge">100</span>
                        </a>
                    </li>


                    <li class="menu-item menu-item-categories">
                        <a href="/categories/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类<span class="badge">15</span>
                        </a>
                    </li>


                    <li class="menu-item menu-item-archives">
                        <a href="/archives/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档<span class="badge">235</span>
                        </a>
                    </li>


                    <li class="menu-item menu-item-bullhorn">
                        <a href="/bullhorn/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-bullhorn"></i> <br />公告</a>
                    </li>


                    <li class="menu-item menu-item-film">
                        <a href="/film/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-film"></i> <br />电影</a>
                    </li>


                    <li class="menu-item menu-item-gift">
                        <a href="/gift/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-gift"></i> <br />福利</a>
                    </li>


                    <li class="menu-item menu-item-about">
                        <a href="/about/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于我</a>
                    </li>


                    <li class="menu-item menu-item-game">
                        <a href="/game/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-gamepad"></i> <br />免费游戏</a>
                    </li>


                    <li class="menu-item menu-item-bitcoin">
                        <a href="/bitcoin/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-bitcoin"></i> <br />挖矿捐赠</a>
                    </li>


                    <li class="menu-item menu-item-file">
                        <a href="http://file.bboysoul.com/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-cloud-upload"></i> <br />我的网盘</a>
                    </li>


                    <li class="menu-item menu-item-software">
                        <a href="/software" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-code"></i> <br />我使用的软件</a>
                    </li>


                    <li class="menu-item menu-item-book">
                        <a href="http://www.jianshu.com/u/2fa06b1b9df6/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-book"></i> <br />我的简书地址</a>
                    </li>


                    <li class="menu-item menu-item-video">
                        <a href="https://space.bilibili.com/31246913/#/" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-tv"></i> <br />我的bilibili频道</a>
                    </li>


                    <li class="menu-item menu-item-cloud">
                        <a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=dhhi35if" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-cloud"></i> <br />阿里云优惠卷分享</a>
                    </li>


                    <li class="menu-item menu-item-twitch">
                        <a href="https://live.bilibili.com/2773758" rel="section">
                            <i class="menu-item-icon fa fa-fw fa-twitch"></i> <br />街舞视频24小时直播</a>
                    </li>



                    <li class="menu-item menu-item-search">

                        <a href="javascript:;" class="popup-trigger">


                            <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
                    </li>

                </ul>



                <div class="site-search">

                    <div class="popup search-popup local-search-popup">
                        <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
                            <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
                            <div class="local-search-input-wrapper">
                                <input autocomplete="off"
                                       placeholder="搜索..." spellcheck="false"
                                       type="text" id="local-search-input">
                            </div>
                        </div>
                        <div id="local-search-result"></div>
                    </div>



                </div>

            </nav>





        </div>
    </header>




    <main id="main" class="main">
        <div class="main-inner">
            <div class="content-wrap">
                <div id="content" class="content">

                    <section id="posts" class="posts-expand">











                        <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">



                            <div class="post-block">
                                <link itemprop="mainEntityOfPage" href="https://www.bboysoul.com/2019/01/27/加微信群啦/">

                                <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Bboysoul">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/blog/head.png">
    </span>

                                <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bboysoul">
    </span>


                                <header class="post-header">



                                    <h1 class="post-title" itemprop="name headline">

                                        <a class="post-title-link" href="/2019/01/27/加微信群啦/" itemprop="url">加微信群啦</a></h1>


                                    <div class="post-meta">
          <span class="post-time">

              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>

                <span class="post-meta-item-text">发表于</span>

              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-27T19:04:00+08:00">2019-01-27</time>






          </span>


                                        <span class="post-category" >

              <span class="post-meta-divider">|</span>

              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>

                <span class="post-meta-item-text">分类于</span>


                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/life/" itemprop="url" rel="index"><span itemprop="name">life</span></a></span>




            </span>















                                    </div>
                                </header>





                                <div class="post-body" itemprop="articleBody">







                                    <p><img src="https://upload-images.jianshu.io/upload_images/3778244-73b1fab6c2dd4583.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
                                    <p>现在在宁波了，在宁波的朋友可以找我面基，欢迎加微信群，还有下面的电报群，还有我的博客的东西都是我自己写的，不知道为什么面试的单位都问我博客上的东西是自己写的吗？哎，难受</p>
                                    <p><code>https://t.me/joinchat/Gl89XBL000hDt2uQSYVg7Q</code></p>




                                </div>













                                <footer class="post-footer">








                                    <div class="post-eof"></div>

                                </footer>
                            </div>



                        </article>













                        <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">



                            <div class="post-block">
                                <link itemprop="mainEntityOfPage" href="https://www.bboysoul.com/2018/07/05/使用kubekit搭建k8s集群/">

                                <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Bboysoul">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/blog/head.png">
    </span>

                                <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bboysoul">
    </span>


                                <header class="post-header">



                                    <h1 class="post-title" itemprop="name headline">

                                        <a class="post-title-link" href="/2018/07/05/使用kubekit搭建k8s集群/" itemprop="url">使用kubekit搭建k8s集群</a></h1>


                                    <div class="post-meta">
          <span class="post-time">

              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>

                <span class="post-meta-item-text">发表于</span>

              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-05T22:39:00+08:00">2018-07-05</time>






          </span>


                                        <span class="post-category" >

              <span class="post-meta-divider">|</span>

              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>

                <span class="post-meta-item-text">分类于</span>


                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a></span>




            </span>















                                    </div>
                                </header>





                                <div class="post-body" itemprop="articleBody">






                                    <p><img src="https://upload-images.jianshu.io/upload_images/3778244-5050a3394923199c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
                                    <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>其实有时候安装搭建这个东西是费时费力的事情，如果有脚本为什么不能使用脚本呢？花100分钟在搭建上还不如用100分钟去研究怎么使用</p>
                                    <!--noindex-->
                                    <div class="post-button text-center">
                                        <a class="btn" href="/2018/07/05/使用kubekit搭建k8s集群/#more" rel="contents">
                                            阅读全文 &raquo;
                                        </a>
                                    </div>
                                    <!--/noindex-->


                                </div>













                                <footer class="post-footer">








                                    <div class="post-eof"></div>

                                </footer>
                            </div>



                        </article>













                        <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">



                            <div class="post-block">
                                <link itemprop="mainEntityOfPage" href="https://www.bboysoul.com/2018/07/05/树梅派安装docker-compose/">

                                <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Bboysoul">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/blog/head.png">
    </span>

                                <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bboysoul">
    </span>


                                <header class="post-header">



                                    <h1 class="post-title" itemprop="name headline">

                                        <a class="post-title-link" href="/2018/07/05/树梅派安装docker-compose/" itemprop="url">树梅派安装docker-compose</a></h1>


                                    <div class="post-meta">
          <span class="post-time">

              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>

                <span class="post-meta-item-text">发表于</span>

              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-05T19:42:00+08:00">2018-07-05</time>






          </span>


                                        <span class="post-category" >

              <span class="post-meta-divider">|</span>

              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>

                <span class="post-meta-item-text">分类于</span>


                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span>




            </span>















                                    </div>
                                </header>





                                <div class="post-body" itemprop="articleBody">






                                    <p><img src="https://upload-images.jianshu.io/upload_images/3778244-6d1d1260e888ba72.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
                                    <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>因为树梅派是arm架构，docker-compose是没有提供官方的二进制文件的，所以我们要使用python的pip工具来安装docker-compose</p>
                                    <!--noindex-->
                                    <div class="post-button text-center">
                                        <a class="btn" href="/2018/07/05/树梅派安装docker-compose/#more" rel="contents">
                                            阅读全文 &raquo;
                                        </a>
                                    </div>
                                    <!--/noindex-->


                                </div>













                                <footer class="post-footer">








                                    <div class="post-eof"></div>

                                </footer>
                            </div>



                        </article>













                        <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">



                            <div class="post-block">
                                <link itemprop="mainEntityOfPage" href="https://www.bboysoul.com/2018/07/05/docker swarm 集群安装Visualizer/">

                                <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Bboysoul">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/blog/head.png">
    </span>

                                <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bboysoul">
    </span>


                                <header class="post-header">



                                    <h1 class="post-title" itemprop="name headline">

                                        <a class="post-title-link" href="/2018/07/05/docker swarm 集群安装Visualizer/" itemprop="url">docker swarm 集群安装Visualizer</a></h1>


                                    <div class="post-meta">
          <span class="post-time">

              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>

                <span class="post-meta-item-text">发表于</span>

              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-05T12:34:00+08:00">2018-07-05</time>






          </span>


                                        <span class="post-category" >

              <span class="post-meta-divider">|</span>

              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>

                <span class="post-meta-item-text">分类于</span>


                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span>




            </span>















                                    </div>
                                </header>





                                <div class="post-body" itemprop="articleBody">






                                    <p><img src="https://upload-images.jianshu.io/upload_images/3778244-26015020730ab9a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
                                    <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>对于docker swarm集群的监控来说，这个东西是比较容易入手的一个监控系统，而且比较简单，不是特别的复杂</p>
                                    <!--noindex-->
                                    <div class="post-button text-center">
                                        <a class="btn" href="/2018/07/05/docker swarm 集群安装Visualizer/#more" rel="contents">
                                            阅读全文 &raquo;
                                        </a>
                                    </div>
                                    <!--/noindex-->


                                </div>













                                <footer class="post-footer">








                                    <div class="post-eof"></div>

                                </footer>
                            </div>



                        </article>













                        <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">



                            <div class="post-block">
                                <link itemprop="mainEntityOfPage" href="https://www.bboysoul.com/2018/07/04/docker swarm 修改集群ip/">

                                <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Bboysoul">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/blog/head.png">
    </span>

                                <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bboysoul">
    </span>


                                <header class="post-header">



                                    <h1 class="post-title" itemprop="name headline">

                                        <a class="post-title-link" href="/2018/07/04/docker swarm 修改集群ip/" itemprop="url">docker swarm 修改集群ip</a></h1>


                                    <div class="post-meta">
          <span class="post-time">

              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>

                <span class="post-meta-item-text">发表于</span>

              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-04T21:14:00+08:00">2018-07-04</time>






          </span>


                                        <span class="post-category" >

              <span class="post-meta-divider">|</span>

              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>

                <span class="post-meta-item-text">分类于</span>


                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span>




            </span>















                                    </div>
                                </header>





                                <div class="post-body" itemprop="articleBody">






                                    <p><img src="https://upload-images.jianshu.io/upload_images/3778244-73e9af4337aa84a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
                                    <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>事情是这样的，我在树梅派上运行着docker swarm的集群原来的ip是192.168.0.113，之后因为搬家，然后ip变成了192.168.11.113，接着的事情大家肯定可以想出来，就是node和manager肯定连接不上了。所以我直接把node移出集群，然后重新加入，但是那时候的join token的命令是下面这样子的</p>
                                    <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">╰─➤  docker swarm join-token worker </span><br><span class="line">To add a worker to this swarm, run the following <span class="built_in">command</span>:</span><br><span class="line"></span><br><span class="line">    docker swarm join --token SWMTKN-1-0shhd0b7uwajhgymxgpp1nv5u17jvcup9vvmhnqkg77ds57e5h-57e7hvjaxaagxtxddz416q5z2 192.168.0.113:2377</span><br></pre></td></tr></table></figure>
                                    <p>当时我就直接把最后的ip修改为192.168.11.113这样把node加入集群，没错，的确可以加入，但是不知道为什么，node还是往192.168.0.113去连接，导致报错</p>
                                    <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">╰─➤  tail -f daemon.log                                                                                                                                                                                 1 ↵</span><br><span class="line">Jul  4 08:07:16 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:16.316088897Z"</span> level=info msg=<span class="string">"grpc: addrConn.resetTransport failed to create client transport: connection error: desc = \"transport: dial tcp 192.168.0.113:2377: getsockopt: no route to host\"; Reconnecting to &#123;192.168.0.113:2377 &lt;nil&gt;&#125;"</span> module=grpc</span><br><span class="line">Jul  4 08:07:16 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:16.317349637Z"</span> level=info msg=<span class="string">"Failed to dial 192.168.0.113:2377: grpc: the connection is closing; please retry."</span> module=grpc</span><br><span class="line">Jul  4 08:07:19 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:19.316151478Z"</span> level=info msg=<span class="string">"grpc: addrConn.resetTransport failed to create client transport: connection error: desc = \"transport: dial tcp 192.168.0.113:2377: getsockopt: no route to host\"; Reconnecting to &#123;192.168.0.113:2377 &lt;nil&gt;&#125;"</span> module=grpc</span><br><span class="line">Jul  4 08:07:22 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:22.318750223Z"</span> level=info msg=<span class="string">"grpc: addrConn.resetTransport failed to create client transport: connection error: desc = \"transport: dial tcp 192.168.0.113:2377: getsockopt: no route to host\"; Reconnecting to &#123;192.168.0.113:2377 &lt;nil&gt;&#125;"</span> module=grpc</span><br><span class="line">Jul  4 08:07:22 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:22.319398354Z"</span> level=error msg=<span class="string">"agent: session failed"</span> backoff=8s error=<span class="string">"rpc error: code = Unavailable desc = grpc: the connection is unavailable"</span> module=node/agent node.id=yi1u62gxyockd23h2z4nm3of1</span><br><span class="line">Jul  4 08:07:22 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:22.319955650Z"</span> level=info msg=<span class="string">"manager selected by agent for new session: &#123;h6i2x0hals6za31uya16zlmli 192.168.0.113:2377&#125;"</span> module=node/agent node.id=yi1u62gxyockd23h2z4nm3of1</span><br><span class="line">Jul  4 08:07:22 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:22.320147058Z"</span> level=info msg=<span class="string">"waiting 7.379239722s before registering session"</span> module=node/agent node.id=yi1u62gxyockd23h2z4nm3of1</span><br><span class="line">Jul  4 08:07:25 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:25.315780534Z"</span> level=info msg=<span class="string">"grpc: addrConn.resetTransport failed to create client transport: connection error: desc = \"transport: dial tcp 192.168.0.113:2377: getsockopt: no route to host\"; Reconnecting to &#123;192.168.0.113:2377 &lt;nil&gt;&#125;"</span> module=grpc</span><br><span class="line">Jul  4 08:07:25 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:25.318872383Z"</span> level=info msg=<span class="string">"Failed to dial 192.168.0.113:2377: grpc: the connection is closing; please retry."</span> module=grpc</span><br><span class="line">Jul  4 08:07:25 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:25.318573109Z"</span> level=info msg=<span class="string">"grpc: addrConn.resetTransport failed to create client transport: connection error: desc = \"transport: dial tcp 192.168.0.113:2377: getsockopt: no route to host\"; Reconnecting to &#123;192.168.0.113:2377 &lt;nil&gt;&#125;"</span> module=grpc</span><br><span class="line">Jul  4 08:07:28 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:28.316269050Z"</span> level=info msg=<span class="string">"grpc: addrConn.resetTransport failed to create client transport: connection error: desc = \"transport: dial tcp 192.168.0.113:2377: getsockopt: no route to host\"; Reconnecting to &#123;192.168.0.113:2377 &lt;nil&gt;&#125;"</span> module=grpc</span><br><span class="line">Jul  4 08:07:31 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:31.331695034Z"</span> level=info msg=<span class="string">"grpc: addrConn.resetTransport failed to create client transport: connection error: desc = \"transport: dial tcp 192.168.0.113:2377: getsockopt: no route to host\"; Reconnecting to &#123;192.168.0.113:2377 &lt;nil&gt;&#125;"</span> module=grpc</span><br><span class="line">Jul  4 08:07:31 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:31.332270925Z"</span> level=error msg=<span class="string">"agent: session failed"</span> backoff=8s error=<span class="string">"rpc error: code = Unavailable desc = grpc: the connection is unavailable"</span> module=node/agent node.id=yi1u62gxyockd23h2z4nm3of1</span><br><span class="line">Jul  4 08:07:31 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:31.332991816Z"</span> level=info msg=<span class="string">"manager selected by agent for new session: &#123;h6i2x0hals6za31uya16zlmli 192.168.0.113:2377&#125;"</span> module=node/agent node.id=yi1u62gxyockd23h2z4nm3of1</span><br><span class="line">Jul  4 08:07:31 pi-slave dockerd[21221]: time=<span class="string">"2018-07-04T08:07:31.333203172Z"</span> level=info msg=<span class="string">"waiting 1.698796755s before registering session"</span> module=node/agent node.id=yi1u62gxyockd23h2z4nm3of1</span><br></pre></td></tr></table></figure>
                                    <p>之后在qq群 facebook里面问了下，还是没有人可以给出一个肯定的解决方式，重新生成join token也不行</p>
                                    <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">╭─root@pi-master /etc/default  </span><br><span class="line">╰─➤  docker swarm join-token --rotate worker </span><br><span class="line">Successfully rotated worker join token.</span><br><span class="line"></span><br><span class="line">To add a worker to this swarm, run the following <span class="built_in">command</span>:</span><br><span class="line"></span><br><span class="line">    docker swarm join --token SWMTKN-1-0shhd0b7uwajhgymxgpp1nv5u17jvcup9vvmhnqkg77ds57e5h-34adsf2isqqqnn7gd5hnhumdh 192.168.0.113:2377</span><br></pre></td></tr></table></figure>
                                    <p>生成出来的ip还是192.168.0.113，那么就没办法了，因为是测试环境，只能暴力解决了重新建立集群</p>
                                    <!--noindex-->
                                    <div class="post-button text-center">
                                        <a class="btn" href="/2018/07/04/docker swarm 修改集群ip/#more" rel="contents">
                                            阅读全文 &raquo;
                                        </a>
                                    </div>
                                    <!--/noindex-->


                                </div>













                                <footer class="post-footer">








                                    <div class="post-eof"></div>

                                </footer>
                            </div>



                        </article>



                    </section>


                    <nav class="pagination">
                        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/47/">47</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
                    </nav>



                </div>


            </div>



            <div class="sidebar-toggle">
                <div class="sidebar-toggle-line-wrap">
                    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
                    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
                    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
                </div>
            </div>

            <aside id="sidebar" class="sidebar">

                <div class="sidebar-inner">





                    <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
                        <div class="site-overview">
                            <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">

                                <img class="site-author-image" itemprop="image"
                                     src="/img/blog/head.png"
                                     alt="Bboysoul" />

                                <p class="site-author-name" itemprop="name">Bboysoul</p>
                                <p class="site-description motion-element" itemprop="description">Bboysoul's Blog</p>
                            </div>


                            <nav class="site-state motion-element">

                                <div class="site-state-item site-state-posts">

                                    <a href="/archives/">

                                        <span class="site-state-item-count">235</span>
                                        <span class="site-state-item-name">日志</span>
                                    </a>
                                </div>





                                <div class="site-state-item site-state-categories">
                                    <a href="/categories/index.html">
































                                        <span class="site-state-item-count">15</span>
                                        <span class="site-state-item-name">分类</span>
                                    </a>
                                </div>





                                <div class="site-state-item site-state-tags">
                                    <a href="/tags/index.html">










































































































































































































                                        <span class="site-state-item-count">100</span>
                                        <span class="site-state-item-name">标签</span>
                                    </a>
                                </div>

                            </nav>





                            <div class="links-of-author motion-element">

                <span class="links-of-author-item">
                  <a href="https://github.com/bboysoulcn" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>

                </span>

                                <span class="links-of-author-item">
                  <a href="mailto:bboysoulcn@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>

                </span>

                                <span class="links-of-author-item">
                  <a href="https://twitter.com/bboysoulcn" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i>Twitter</a>

                </span>

                                <span class="links-of-author-item">
                  <a href="https://www.facebook.com/wenjie.mei.75" target="_blank" title="FB Page"><i class="fa fa-fw fa-facebook"></i>FB Page</a>

                </span>

                                <span class="links-of-author-item">
                  <a href="https://www.youtube.com/channel/UCFHqz6Zt0RFxHUicSZ_P0tQ?view_as=subscriber" target="_blank" title="YouTube"><i class="fa fa-fw fa-youtube"></i>YouTube</a>

                </span>

                                <span class="links-of-author-item">
                  <a href="https://www.instagram.com/wenjie_mei/?hl=zh-cn" target="_blank" title="Instagram"><i class="fa fa-fw fa-instagram"></i>Instagram</a>

                </span>

                            </div>







                            <div class="links-of-blogroll motion-element links-of-blogroll-block">
                                <div class="links-of-blogroll-title">
                                    <i class="fa  fa-fw fa-link"></i>
                                    友情链接
                                </div>
                                <ul class="links-of-blogroll-list">

                                    <li class="links-of-blogroll-item">
                                        <a href="https://blog.ihoey.com/" title="梦魇小栈" target="_blank">梦魇小栈</a>
                                    </li>

                                    <li class="links-of-blogroll-item">
                                        <a href="https://enginx.cn/" title="Terence_Project" target="_blank">Terence_Project</a>
                                    </li>

                                    <li class="links-of-blogroll-item">
                                        <a href="https://www.lijinghua.club/" title="李精华博客" target="_blank">李精华博客</a>
                                    </li>

                                    <li class="links-of-blogroll-item">
                                        <a href="http://huolalaweb.com/" title="火辣辣博客" target="_blank">火辣辣博客</a>
                                    </li>

                                </ul>
                            </div>







                        </div>
                    </section>





                </div>
            </aside>



        </div>
    </main>

    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2018</span>
                <span class="with-love">
    <i class="fa fa-linux"></i>
  </span>
                <span class="author" itemprop="copyrightHolder">Bboysoul</span>




            </div>











            <div id="cc-myssl-id" style="position: fixed;right: 0;bottom: 0;width: 65px;height: 65px;z-index: 99;">
                <a href="https://myssl.com/www.bboysoul.com?from=mysslid" target="_blank" rel="nofollow noopener noreferrer">
                    <img src="https://static.myssl.com/res/images/myssl-id.png" target="_blank" rel="nofollow noopener noreferrer" alt="" style="width:100%;height:100%">
                </a>
            </div>











        </div>
    </footer>


    <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>

        <span id="scrollpercent"><span>0</span>%</span>

    </div>




</div>



<script type="text/javascript">
    if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
        window.Promise = null;
    }
</script>




























<script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>




<script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>




<script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>






<script type="text/javascript" src="/js/src/utils.js?v=6.0.4"></script>

<script type="text/javascript" src="/js/src/motion.js?v=6.0.4"></script>







<script type="text/javascript" src="/js/src/affix.js?v=6.0.4"></script>

<script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.4"></script>








<script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.4"></script>
































<script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
        search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
        isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
        $('.popup').hide();
        $('#local-search-input').val('');
        $('.search-result-list').remove();
        $('#no-result').remove();
        $(".local-search-pop-overlay").remove();
        $('body').css('overflow', '');
    }

    function proceedsearch() {
        $("body")
            .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
            .css('overflow', 'hidden');
        $('.search-popup-overlay').click(onPopupClose);
        $('.popup').toggle();
        var $localSearchInput = $('#local-search-input');
        $localSearchInput.attr("autocapitalize", "none");
        $localSearchInput.attr("autocorrect", "off");
        $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
        'use strict';

        // start loading animation
        $("body")
            .append('<div class="search-popup-overlay local-search-pop-overlay">' +
                '<div id="search-loading-icon">' +
                '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
                '</div>' +
                '</div>')
            .css('overflow', 'hidden');
        $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');



        $.ajax({
            url: path,
            dataType: isXml ? "xml" : "json",
            async: true,
            success: function(res) {
                // get the contents from search data
                isfetched = true;
                $('.popup').detach().appendTo('.header-inner');
                var datas = isXml ? $("entry", res).map(function() {
                    return {
                        title: $("title", this).text(),
                        content: $("content",this).text(),
                        url: $("url" , this).text()
                    };
                }).get() : res;
                var input = document.getElementById(search_id);
                var resultContent = document.getElementById(content_id);
                var inputEventFunction = function() {
                    var searchText = input.value.trim().toLowerCase();
                    var keywords = searchText.split(/[\s\-]+/);
                    if (keywords.length > 1) {
                        keywords.push(searchText);
                    }
                    var resultItems = [];
                    if (searchText.length > 0) {
                        // perform local searching
                        datas.forEach(function(data) {
                            var isMatch = false;
                            var hitCount = 0;
                            var searchTextCount = 0;
                            var title = data.title.trim();
                            var titleInLowerCase = title.toLowerCase();
                            var content = data.content.trim().replace(/<[^>]+>/g,"");

                            var contentInLowerCase = content.toLowerCase();
                            var articleUrl = decodeURIComponent(data.url);
                            var indexOfTitle = [];
                            var indexOfContent = [];
                            // only match articles with not empty titles
                            if(title != '') {
                                keywords.forEach(function(keyword) {
                                    function getIndexByWord(word, text, caseSensitive) {
                                        var wordLen = word.length;
                                        if (wordLen === 0) {
                                            return [];
                                        }
                                        var startPosition = 0, position = [], index = [];
                                        if (!caseSensitive) {
                                            text = text.toLowerCase();
                                            word = word.toLowerCase();
                                        }
                                        while ((position = text.indexOf(word, startPosition)) > -1) {
                                            index.push({position: position, word: word});
                                            startPosition = position + wordLen;
                                        }
                                        return index;
                                    }

                                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                                });
                                if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                                    isMatch = true;
                                    hitCount = indexOfTitle.length + indexOfContent.length;
                                }
                            }

                            // show search results

                            if (isMatch) {
                                // sort index by position of keyword

                                [indexOfTitle, indexOfContent].forEach(function (index) {
                                    index.sort(function (itemLeft, itemRight) {
                                        if (itemRight.position !== itemLeft.position) {
                                            return itemRight.position - itemLeft.position;
                                        } else {
                                            return itemLeft.word.length - itemRight.word.length;
                                        }
                                    });
                                });

                                // merge hits into slices

                                function mergeIntoSlice(text, start, end, index) {
                                    var item = index[index.length - 1];
                                    var position = item.position;
                                    var word = item.word;
                                    var hits = [];
                                    var searchTextCountInSlice = 0;
                                    while (position + word.length <= end && index.length != 0) {
                                        if (word === searchText) {
                                            searchTextCountInSlice++;
                                        }
                                        hits.push({position: position, length: word.length});
                                        var wordEnd = position + word.length;

                                        // move to next position of hit

                                        index.pop();
                                        while (index.length != 0) {
                                            item = index[index.length - 1];
                                            position = item.position;
                                            word = item.word;
                                            if (wordEnd > position) {
                                                index.pop();
                                            } else {
                                                break;
                                            }
                                        }
                                    }
                                    searchTextCount += searchTextCountInSlice;
                                    return {
                                        hits: hits,
                                        start: start,
                                        end: end,
                                        searchTextCount: searchTextCountInSlice
                                    };
                                }

                                var slicesOfTitle = [];
                                if (indexOfTitle.length != 0) {
                                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                                }

                                var slicesOfContent = [];
                                while (indexOfContent.length != 0) {
                                    var item = indexOfContent[indexOfContent.length - 1];
                                    var position = item.position;
                                    var word = item.word;
                                    // cut out 100 characters
                                    var start = position - 20;
                                    var end = position + 80;
                                    if(start < 0){
                                        start = 0;
                                    }
                                    if (end < position + word.length) {
                                        end = position + word.length;
                                    }
                                    if(end > content.length){
                                        end = content.length;
                                    }
                                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                                }

                                // sort slices in content by search text's count and hits' count

                                slicesOfContent.sort(function (sliceLeft, sliceRight) {
                                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                                        return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                                        return sliceRight.hits.length - sliceLeft.hits.length;
                                    } else {
                                        return sliceLeft.start - sliceRight.start;
                                    }
                                });

                                // select top N slices in content

                                var upperBound = parseInt('1');
                                if (upperBound >= 0) {
                                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                                }

                                // highlight title and content

                                function highlightKeyword(text, slice) {
                                    var result = '';
                                    var prevEnd = slice.start;
                                    slice.hits.forEach(function (hit) {
                                        result += text.substring(prevEnd, hit.position);
                                        var end = hit.position + hit.length;
                                        result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                                        prevEnd = end;
                                    });
                                    result += text.substring(prevEnd, slice.end);
                                    return result;
                                }

                                var resultItem = '';

                                if (slicesOfTitle.length != 0) {
                                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                                } else {
                                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                                }

                                slicesOfContent.forEach(function (slice) {
                                    resultItem += "<a href='" + articleUrl + "'>" +
                                        "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                                        "...</p>" + "</a>";
                                });

                                resultItem += "</li>";
                                resultItems.push({
                                    item: resultItem,
                                    searchTextCount: searchTextCount,
                                    hitCount: hitCount,
                                    id: resultItems.length
                                });
                            }
                        })
                    };
                    if (keywords.length === 1 && keywords[0] === "") {
                        resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
                    } else if (resultItems.length === 0) {
                        resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
                    } else {
                        resultItems.sort(function (resultLeft, resultRight) {
                            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                                return resultRight.searchTextCount - resultLeft.searchTextCount;
                            } else if (resultLeft.hitCount !== resultRight.hitCount) {
                                return resultRight.hitCount - resultLeft.hitCount;
                            } else {
                                return resultRight.id - resultLeft.id;
                            }
                        });
                        var searchResultList = '<ul class=\"search-result-list\">';
                        resultItems.forEach(function (result) {
                            searchResultList += result.item;
                        })
                        searchResultList += "</ul>";
                        resultContent.innerHTML = searchResultList;
                    }
                }

                if ('auto' === 'auto') {
                    input.addEventListener('input', inputEventFunction);
                } else {
                    $('.search-icon').click(inputEventFunction);
                    input.addEventListener('keypress', function (event) {
                        if (event.keyCode === 13) {
                            inputEventFunction();
                        }
                    });
                }

                // remove loading animation
                $(".local-search-pop-overlay").remove();
                $('body').css('overflow', '');

                proceedsearch();
            }
        });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
        e.stopPropagation();
        if (isfetched === false) {
            searchFunc(path, 'local-search-input', 'local-search-result');
        } else {
            proceedsearch();
        };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
        e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
        var shouldDismissSearchPopup = event.which === 27 &&
            $('.search-popup').is(':visible');
        if (shouldDismissSearchPopup) {
            onPopupClose();
        }
    });
</script>
























</body>
</html>
